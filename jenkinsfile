pipeline {
    agent any

    tools {
        // Assurez-vous que Maven est configuré dans Jenkins
        maven 'maven3'  // Maven configuré sur Jenkins
        jdk 'jdk11'    // JDK que tu utilises pour ton projet Java
    }

    stages {
        stage('Cloner le dépôt Git') {
            steps {
                script {
                    // Cloner ton dépôt Git
                    git 'https://github.com/tahaelbekkaye/projet_Jenkins.git'
                }
            }
        }

        stage('Compiler le projet') {
            steps {
                script {
                    // Utilisation de Maven pour compiler le projet
                    sh "mvn clean install"
                }
            }
        }

        stage('Exécuter les tests unitaires') {
            steps {
                script {
                    // Exécution des tests unitaires avec Maven
                    sh "mvn test"
                }
            }
        }

        stage('Publier l\'artefact') {
            steps {
                script {
                    // Publier l'artefact (ex: JAR) sur un serveur Nexus ou Artifactory
                    sh "mvn deploy"
                }
            }
        }
    }

    post {
        success {
            echo 'Pipeline terminé avec succès!'
        }
        failure {
            echo 'Pipeline échoué!'
        }
    }
}
